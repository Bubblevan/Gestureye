# CVZone 手势检测项目

这是一个基于CVZone和MediaPipe的实时手势检测应用程序，使用模块化架构设计，支持多种静态和动态手势识别。

## 功能特点

- **实时手势检测**: 使用摄像头进行实时手势识别
- **多种手势支持**: 
  - 静态手势: V字手势(胜利手势)、竖大拇指(点赞)、倒竖大拇指
  - 动态手势: 握拳到张开手势
- **双手支持**: 同时检测和识别两只手的手势
- **手势绑定系统**: 支持将手势绑定到快捷键和系统功能
- **图形化界面**: 提供直观的PyQt界面进行配置和监控
- **可配置界面**: 支持显示/隐藏手部关键点、手掌中心等
- **模块化设计**: 易于扩展新的手势检测器

## 项目结构

```
dyn_gestures/
├── app.py                # 应用程序入口
├── main.py               # 命令行版本主程序
├── run_qt.py             # PyQt版本启动脚本
├── config.py             # 配置文件
├── gesture_manager.py    # 手势管理器
├── hand_utils.py         # 手部工具类
├── core/                 # 核心功能模块
│   ├── __init__.py
│   ├── gesture_bindings.py  # 手势绑定配置
│   └── action_executor.py   # 动作执行器
├── ui/                   # 用户界面模块
│   ├── __init__.py
│   ├── main_window.py    # 主窗口
│   ├── widgets/          # UI组件
│   │   ├── __init__.py
│   │   └── binding_config.py  # 手势绑定配置组件
│   └── threads/          # 后台线程
│       ├── __init__.py
│       └── gesture_detection.py  # 手势检测线程
├── gestures/             # 手势检测器模块
│   ├── __init__.py
│   ├── base.py          # 基础检测器类
│   ├── static/          # 静态手势检测器
│   │   ├── peace_sign.py # V字手势检测器
│   │   └── thumbs.py    # 竖大拇指检测器
│   └── dynamic/         # 动态手势检测器
│       └── hand_open.py # 握拳张开检测器
├── pyproject.toml       # 项目配置
└── README.md            # 项目说明
```

## 安装要求

- Python 3.12+
- 摄像头设备

## 安装步骤

1. 克隆或下载项目到本地
2. 安装依赖包：
   ```bash
   uv sync
   ```

## 运行方法

### 方法1: 使用现代化图形界面（推荐）
```bash
python run_modern_ui.py
```
或
```bash
uv run run_modern_ui.py
```

### 方法2: 使用传统图形界面
```bash
python app.py
```
或
```bash
python run_qt.py
```

### 方法3: 使用命令行版本
```bash
uv run main.py
```

## 使用说明

### 现代化图形界面版本（推荐）
1. 运行 `python run_modern_ui.py` 启动现代化界面
2. 点击"▶ 开始检测"按钮启动摄像头
3. 在"🎯 手势绑定"标签页中配置手势对应的快捷键或系统功能
4. 将手放在摄像头前方，程序会自动检测并执行对应的动作
5. 在"📊 实时监控"标签页中查看检测和执行记录

### 传统图形界面版本
1. 运行 `uv run run_qt.py` 启动传统图形界面
2. 点击"开始检测"按钮启动摄像头
3. 在"手势绑定"标签页中配置手势对应的快捷键或系统功能
4. 将手放在摄像头前方，程序会自动检测并执行对应的动作
5. 在"运行日志"标签页中查看检测和执行记录

### 命令行版本
1. 运行 `uv run main.py` 启动命令行版本
2. 将手放在摄像头前方，程序会自动检测并识别手势
3. 按 'q' 键或关闭窗口退出程序

### 支持的手势
- **✌️ V字手势**: 伸出食指和中指形成V字形（默认绑定：音量增加）
- **👍 竖大拇指**: 竖起大拇指，其他手指握拳（默认绑定：音量减少）
- **👎 倒竖大拇指**: 倒竖大拇指，其他手指握拳（默认绑定：静音）
- **🖐️ 握拳张开**: 从握拳状态快速张开手掌（默认绑定：窗口最大化）
- **👌 OK手势**: 拇指和食指形成圆圈（默认绑定：复制）
- **⬅️ 左滑手势**: 手背到手心的左滑动作（默认绑定：后退）
- **➡️ 右滑手势**: 手背到手心的右滑动作（默认绑定：前进）
- **⬆️ 上滑手势**: 手背到手心的上滑动作（默认绑定：向上翻页）
- **⬇️ 下滑手势**: 手背到手心的下滑动作（默认绑定：向下翻页）

### 支持的动作类型
- **键盘快捷键**: 如 Ctrl+C、Alt+Tab、F5 等
- **系统功能**: 窗口最大化/最小化、音量控制、媒体播放控制等
- **自定义功能**: 可扩展的自定义动作

## 配置选项

可以通过修改 `config.py` 文件来调整以下设置：

- **摄像头配置**: 摄像头索引、检测参数
- **显示配置**: 是否显示关键点、手掌中心、摄像头窗口等
- **手势参数**: 各种手势的检测阈值和敏感度
- **颜色配置**: 界面元素的颜色设置

## 手势检测原理

### 静态手势
- **V字手势**: 检测食指和中指是否伸直且分开，其他手指是否弯曲，拇指是否收起
- **竖大拇指**: 检测大拇指是否朝上伸直，其他手指是否握拳贴近手掌

### 动态手势
- **握拳张开**: 通过分析手指尖位置的方差变化来检测从握拳到张开的动作

## 扩展开发

### 添加新的手势检测器

1. 在 `gestures/static/` 或 `gestures/dynamic/` 目录下创建新的检测器文件
2. 继承 `StaticGestureDetector` 或 `DynamicGestureDetector` 基类
3. 实现 `detect()` 方法
4. 在 `gesture_manager.py` 中注册新的检测器

### 自定义手势参数

修改 `config.py` 中的 `GESTURE_CONFIG` 部分来调整检测参数。

## 技术栈

- **CVZone**: 计算机视觉库，简化OpenCV操作
- **MediaPipe**: Google的机器学习框架，用于手部关键点检测
- **OpenCV**: 计算机视觉库，用于图像处理和显示
- **PyQt6**: 跨平台GUI框架，提供图形界面
- **pynput**: 跨平台输入控制库，用于模拟键盘输入
- **pywin32**: Windows API接口，用于系统功能控制
- **NumPy**: 数值计算库

## 故障排除

1. **摄像头无法打开**: 检查摄像头是否被其他应用占用，或修改 `config.py` 中的 `CAMERA_INDEX`
2. **检测不准确**: 调整 `config.py` 中的检测参数，确保光线充足
3. **程序卡死**: 检查是否有其他程序占用摄像头资源

## 许可证

本项目仅供学习和研究使用。

## 贡献

欢迎提交问题报告和功能请求！
